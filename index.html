<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>project: starfall</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üå†</text></svg>">
<style>
  :root { --neon: #00d4ff; --bg: #050505; --gold: #ffd700; }
  body { background: var(--bg); color: #fff; overflow-x: hidden; margin: 0; font-family: 'Courier New', monospace; }

  /* BOOT SCREEN & SCANLINES */
  #boot-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; color: #00ff41; z-index: 10000; padding: 20px; overflow: hidden; display: flex; flex-direction: column; }
  .boot-line { margin-bottom: 4px; font-size: 14px; text-shadow: 0 0 5px #00ff41; }
  .cursor { display: inline-block; width: 8px; height: 15px; background: #00ff41; animation: blink 1s infinite; }
  @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }
  .scanlines { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.1) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.03), rgba(0, 255, 0, 0.01), rgba(0, 0, 255, 0.03)); background-size: 100% 4px, 3px 100%; pointer-events: none; z-index: 9999; }

  /* NAVIGATION */
  header { padding: 20px; border-bottom: 1px solid #222; display: flex; justify-content: space-between; align-items: center; }
  nav a { color: #888; text-decoration: none; margin-left: 20px; transition: 0.3s; }
  nav a:hover { color: var(--neon); }

  /* PAGES */
  .page { display: none; padding: 40px; }
  .page.active { display: block; }

  /* ACHIEVEMENTS */
  .achievement-box { display: flex; gap: 10px; margin-top: 20px; }
  .medal { border: 1px solid #333; padding: 10px; border-radius: 4px; opacity: 0.3; transition: 0.5s; font-size: 0.8rem; }
  .medal.unlocked { opacity: 1; border-color: var(--gold); color: var(--gold); box-shadow: 0 0 10px rgba(255, 215, 0, 0.3); }

  /* UI ELEMENTS */
  .settings-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }
  .settings-card { background: rgba(255, 255, 255, 0.05); padding: 20px; border-radius: 8px; border: 1px solid #333; }
  .control-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
  #game-viewport { width: 100%; height: 80vh; border: 2px solid var(--neon); background: #000; }
  .game-card { background: rgba(0, 212, 255, 0.03); cursor: pointer; border: 1px solid #333; padding: 30px; text-align: center; margin-bottom: 10px; }
  .game-card:hover { border-color: var(--neon); background: rgba(0, 212, 255, 0.1); }
  .action-btn { background: #111; color: var(--neon); border: 1px solid var(--neon); padding: 8px; cursor: pointer; }
</style>
</head>
<body>

<div id="boot-screen"><div id="boot-log"></div><div><span class="cursor"></span></div></div>
<div class="scanlines"></div>
<canvas id="stars" style="position:fixed; top:0; left:0; z-index:-1;"></canvas>

<header>
  <h1>PROJECT: STARFALL</h1>
  <nav>
    <a href="#home">HOME</a>
    <a href="#play">PLAY</a>
    <a href="#systems">SYSTEMS</a>
  </nav>
</header>

<main>
  <section id="home" class="page active">
    <h2>Welcome, Operator</h2>
    <div class="settings-card">
      <h3>System Medals</h3>
      <div class="achievement-box">
        <div id="medal-rookie" class="medal">üèÜ ROOKIE: Played 1 Module</div>
        <div id="medal-sweat" class="medal">üî• SWEAT: Mastered All Modules</div>
      </div>
    </div>
  </section>

  <section id="play" class="page">
    <div id="game-container" style="display:none;">
      <button class="action-btn" onclick="closeGame()">üìÇ EXIT MODULE</button>
      <iframe id="game-viewport" src="" frameborder="0"></iframe>
    </div>
    <div id="library">
      <div class="game-card" onclick="loadGame('games/neon-racer/index.html', 'NeonRacer')">Neon Racer</div>
      <div class="game-card" onclick="loadGame('games/asteroid-avoider/index.html', 'AsteroidAvoider')">Asteroid Avoider</div>
      <div class="game-card" onclick="loadGame('games/cyber-pulse/index.html', 'CyberPulse')">Cyber Pulse</div>
      <div class="game-card" onclick="loadGame('games/star-shifter/index.html', 'StarShifter')">Star Shifter</div>
      <div class="game-card" onclick="loadGame('games/void-operator/index.html', 'VoidOperator')">Void Operator</div>
    </div>
  </section>

  <section id="systems" class="page">
    <div class="settings-card">
      <h3>Audio Systems</h3>
      <div class="control-row">
        <span>Ambience Volume</span>
        <input type="range" id="vol-slider" min="0" max="1" step="0.1" value="0.5" onchange="updateVolume(this.value)">
      </div>
      <div class="control-row">
        <span>Clear Memory</span>
        <button class="action-btn" onclick="localStorage.clear(); location.reload();">FACTORY RESET</button>
      </div>
    </div>
  </section>
</main>

<audio id="bg-music" loop src="ambience.mp3"></audio>

<script>
/* --- BOOT SEQUENCE --- */
const bootMessages = ["MOUNTING VIRTUAL_DRIVE...", "LOADING MODULES...", "INIT AUDIO_CORE...", "SUCCESS."];
async function startBoot() {
  const log = document.getElementById('boot-log');
  for (let msg of bootMessages) {
    let line = document.createElement('div');
    line.className = 'boot-line';
    line.textContent = `> ${msg}`;
    log.appendChild(line);
    await new Promise(r => setTimeout(r, 400));
  }
  document.getElementById('boot-screen').style.display = 'none';
  document.getElementById('bg-music').play().catch(() => console.log("User must interact to play audio"));
}

/* --- ACHIEVEMENT ENGINE --- */
let playedModules = JSON.parse(localStorage.getItem('sf_played')) || [];

function trackProgress(gameId) {
  if (!playedModules.includes(gameId)) {
    playedModules.push(gameId);
    localStorage.setItem('sf_played', JSON.stringify(playedModules));
  }
  updateMedals();
}

function updateMedals() {
  if (playedModules.length >= 1) document.getElementById('medal-rookie').classList.add('unlocked');
  if (playedModules.length >= 5) document.getElementById('medal-sweat').classList.add('unlocked');
}

/* --- GAME CORE --- */
function loadGame(path, id) {
  document.getElementById('game-viewport').src = path;
  document.getElementById('library').style.display = 'none';
  document.getElementById('game-container').style.display = 'block';
  trackProgress(id);
}
function closeGame() {
  document.getElementById('game-viewport').src = '';
  document.getElementById('game-container').style.display = 'none';
  document.getElementById('library').style.display = 'block';
}

/* --- AUDIO & NAVIGATION --- */
function updateVolume(v) { document.getElementById('bg-music').volume = v; }
window.addEventListener("hashchange", () => {
  const hash = location.hash || "#home";
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.querySelector(hash).classList.add('active');
});

/* --- STARFIELD --- */
const canvas = document.getElementById("stars");
const ctx = canvas.getContext("2d");
let stars = Array.from({length: 200}, () => ({ x: Math.random()*window.innerWidth, y: Math.random()*window.innerHeight, s: Math.random()*2 }));
function draw() {
  canvas.width = window.innerWidth; canvas.height = window.innerHeight;
  ctx.clearRect(0,0,canvas.width,canvas.height); ctx.fillStyle = "#fff";
  stars.forEach(s => { ctx.fillRect(s.x, s.y, s.s, s.s); s.y += 0.5; if(s.y > canvas.height) s.y = 0; });
  requestAnimationFrame(draw);
}

window.onload = () => { startBoot(); draw(); updateMedals(); };
</script>
</body>
</html>
