<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>project: starfall</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸŒ </text></svg>">

<style>
  /* --- UI & THEMING --- */
  :root { 
    --neon: #00d4ff; 
    --bg: #050505; 
    --gold: #ffd700; 
    --terminal: #00ff41;
  }
  
  body { 
    background: var(--bg); 
    color: #fff; 
    overflow-x: hidden; 
    margin: 0; 
    font-family: 'Courier New', monospace; 
  }

  /* BOOT SCREEN */
  #boot-screen { 
    position: fixed; 
    top: 0; left: 0; 
    width: 100%; height: 100%; 
    background: #000; 
    color: var(--terminal); 
    z-index: 10000; 
    padding: 30px; 
    box-sizing: border-box;
    overflow: hidden; 
    display: flex; 
    flex-direction: column; 
  }
  .boot-line { margin-bottom: 5px; font-size: 14px; text-shadow: 0 0 5px var(--terminal); }
  .cursor { display: inline-block; width: 10px; height: 18px; background: var(--terminal); animation: blink 1s infinite; vertical-align: middle; }
  @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }

  /* SCANLINES */
  .scanlines { 
    position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
    background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.1) 50%), 
                linear-gradient(90deg, rgba(255, 0, 0, 0.03), rgba(0, 255, 0, 0.01), rgba(0, 0, 255, 0.03)); 
    background-size: 100% 4px, 3px 100%; 
    pointer-events: none; z-index: 9999; 
  }

  /* NAVIGATION */
  header { 
    padding: 20px 40px; 
    border-bottom: 1px solid #222; 
    display: flex; 
    justify-content: space-between; 
    align-items: center; 
    background: rgba(5, 5, 5, 0.8);
    backdrop-filter: blur(10px);
  }
  header h1 { font-size: 1.2rem; letter-spacing: 4px; color: var(--neon); margin: 0; }
  nav a { color: #888; text-decoration: none; margin-left: 25px; font-size: 0.9rem; transition: 0.3s; }
  nav a:hover { color: var(--neon); text-shadow: 0 0 10px var(--neon); }

  /* PAGES */
  .page { display: none; padding: 40px; max-width: 1200px; margin: 0 auto; }
  .page.active { display: block; animation: fadeIn 0.5s ease-out; }
  @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

  /* ACHIEVEMENTS */
  .achievement-box { display: flex; gap: 20px; margin-top: 20px; flex-wrap: wrap; }
  .medal { 
    border: 1px solid #333; 
    padding: 20px; 
    border-radius: 8px; 
    background: rgba(255, 255, 255, 0.02);
    opacity: 0.2; 
    transition: 1s all; 
    text-align: center;
    min-width: 200px;
  }
  .medal.unlocked { 
    opacity: 1; 
    border-color: var(--gold); 
    color: var(--gold); 
    box-shadow: 0 0 20px rgba(255, 215, 0, 0.2); 
    transform: scale(1.05);
  }
  .medal h4 { margin: 0 0 10px 0; text-transform: uppercase; letter-spacing: 2px; }

  /* LIBRARY & CARDS */
  .game-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 30px; }
  .game-card { 
    background: rgba(0, 212, 255, 0.03); 
    cursor: pointer; 
    border: 1px solid #333; 
    padding: 40px 20px; 
    text-align: center; 
    transition: 0.3s; 
    font-weight: bold;
    letter-spacing: 1px;
  }
  .game-card:hover { 
    border-color: var(--neon); 
    background: rgba(0, 212, 255, 0.1); 
    box-shadow: 0 0 20px rgba(0, 212, 255, 0.2);
    transform: translateY(-5px);
  }

  /* SYSTEM SETTINGS */
  .settings-card { background: rgba(255, 255, 255, 0.05); padding: 25px; border-radius: 12px; border: 1px solid #333; margin-bottom: 20px; }
  .control-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
  
  /* GAME VIEWPORT */
  #game-container { display: none; }
  #game-viewport { width: 100%; height: 80vh; border: 2px solid var(--neon); background: #000; border-radius: 8px; }

  .action-btn { 
    background: #000; 
    color: var(--neon); 
    border: 1px solid var(--neon); 
    padding: 10px 20px; 
    cursor: pointer; 
    font-family: 'Courier New', monospace;
    transition: 0.3s;
  }
  .action-btn:hover { background: var(--neon); color: #000; }
</style>
</head>
<body>

<div id="boot-screen">
  <div id="boot-log"></div>
  <div><span class="cursor"></span></div>
</div>

<div class="scanlines"></div>
<canvas id="stars" style="position:fixed; top:0; left:0; z-index:-1;"></canvas>

<header>
  <h1>PROJECT: STARFALL</h1>
  <nav>
    <a href="#home">HOME</a>
    <a href="#play">PLAY</a>
    <a href="#systems">SYSTEMS</a>
  </nav>
</header>

<main>
  <section id="home" class="page active">
    <h2>Welcome, Operator</h2>
    <p style="color: #888;">System status: Nominal. All archive modules verified.</p>
    
    <div class="settings-card" style="margin-top: 40px;">
      <h3 style="color: var(--neon); margin-top: 0;">System Medals</h3>
      <div class="achievement-box">
        <div id="medal-rookie" class="medal">
          <h4>Rookie</h4>
          <span>First Module Accessed</span>
        </div>
        <div id="medal-sweat" class="medal">
          <h4>Sweat</h4>
          <span>All Modules Initialized</span>
        </div>
      </div>
    </div>
  </section>

  <section id="play" class="page">
    <div id="game-container">
      <div style="display: flex; justify-content: space-between; margin-bottom: 15px;">
        <button class="action-btn" onclick="closeGame()">ðŸ“‚ EXIT TO ARCHIVE</button>
        <span id="active-title" style="color: var(--neon); align-self: center;"></span>
      </div>
      <iframe id="game-viewport" src="" frameborder="0"></iframe>
    </div>

    <div id="library">
      <h2>Module Archive</h2>
      <div class="game-grid">
        <div class="game-card" onclick="loadGame('games/neon-racer/index.html', 'NeonRacer')">NEON RACER</div>
        <div class="game-card" onclick="loadGame('games/asteroid-avoider/index.html', 'AsteroidAvoider')">ASTEROID AVOIDER</div>
        <div class="game-card" onclick="loadGame('games/cyber-pulse/index.html', 'CyberPulse')">CYBER PULSE</div>
        <div class="game-card" onclick="loadGame('games/star-shifter/index.html', 'StarShifter')">STAR SHIFTER</div>
        <div class="game-card" onclick="loadGame('games/void-operator/index.html', 'VoidOperator')">VOID OPERATOR</div>
      </div>
    </div>
  </section>

  <section id="systems" class="page">
    <h2>System Configuration</h2>
    <div class="settings-card">
      <h3>Audio Core</h3>
      <div class="control-row">
        <span>Ambience Volume</span>
        <input type="range" id="vol-slider" min="0" max="1" step="0.1" value="0.5" onchange="updateVolume(this.value)">
      </div>
      <p style="font-size: 0.8rem; color: #555;">Note: Click anywhere on the interface to initialize audio streams.</p>
    </div>

    <div class="settings-card">
        <h3>Memory Management</h3>
        <div class="control-row">
          <span>Wipe Local Cache</span>
          <button class="action-btn" style="border-color: #ff4444; color: #ff4444;" onclick="factoryReset()">FACTORY RESET</button>
        </div>
      </div>
  </section>
</main>

<audio id="bg-music" loop src="ambience.mp3"></audio>

<script>
/* --- BOOT SEQUENCE & AUDIO UNLOCK --- */
const bootMessages = [
  "INITIALIZING BIOS...",
  "CPU: NEURAL_LINK 8-CORE... OK",
  "VRAM: 16GB VIRTUAL... OK",
  "MOUNTING /games/archive... DONE",
  "AUDIO_CORE: WAITING FOR USER SIGNAL...",
  "SYSTEMS READY. WELCOME BACK."
];

async function startBoot() {
  const log = document.getElementById('boot-log');
  const music = document.getElementById('bg-music');

  // AUDIO UNLOCKER: Browsers block sound until a click happens
  const unlockAudio = () => {
    music.play().then(() => {
      music.volume = 0.5;
      console.log("Audio Stream: ONLINE");
    }).catch(e => console.log("Audio waiting for interaction..."));
    window.removeEventListener('click', unlockAudio);
  };
  window.addEventListener('click', unlockAudio);

  for (let msg of bootMessages) {
    let line = document.createElement('div');
    line.className = 'boot-line';
    line.textContent = `> ${msg}`;
    log.appendChild(line);
    await new Promise(r => setTimeout(r, 400));
  }

  const screen = document.getElementById('boot-screen');
  screen.style.transition = 'opacity 1s ease';
  screen.style.opacity = '0';
  setTimeout(() => screen.style.display = 'none', 1000);
}

/* --- ACHIEVEMENT ENGINE --- */
let playedModules = JSON.parse(localStorage.getItem('sf_played')) || [];

function trackProgress(gameId) {
  if (!playedModules.includes(gameId)) {
    playedModules.push(gameId);
    localStorage.setItem('sf_played', JSON.stringify(playedModules));
  }
  updateMedals();
}

function updateMedals() {
  if (playedModules.length >= 1) {
    document.getElementById('medal-rookie').classList.add('unlocked');
  }
  if (playedModules.length >= 5) {
    document.getElementById('medal-sweat').classList.add('unlocked');
  }
}

/* --- GAME LOGIC --- */
function loadGame(path, id) {
  document.getElementById('game-viewport').src = path;
  document.getElementById('library').style.display = 'none';
  document.getElementById('game-container').style.display = 'block';
  document.getElementById('active-title').textContent = `RUNNING MODULE: ${id.toUpperCase()}`;
  trackProgress(id);
}

function closeGame() {
  document.getElementById('game-viewport').src = '';
  document.getElementById('game-container').style.display = 'none';
  document.getElementById('library').style.display = 'block';
}

function factoryReset() {
  if(confirm("Confirm system wipe? All achievements and scores will be lost.")) {
    localStorage.clear();
    location.reload();
  }
}

/* --- AUDIO & NAVIGATION --- */
function updateVolume(v) { 
  document.getElementById('bg-music').volume = v; 
}

window.addEventListener("hashchange", () => {
  const hash = location.hash || "#home";
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  const activePage = document.querySelector(hash);
  if (activePage) activePage.classList.add('active');
});

/* --- STARFIELD BACKGROUND --- */
const canvas = document.getElementById("stars");
const ctx = canvas.getContext("2d");
let stars = [];

function initStars() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  stars = Array.from({length: 200}, () => ({
    x: Math.random() * canvas.width,
    y: Math.random() * canvas.height,
    s: Math.random() * 2,
    v: Math.random() * 0.5 + 0.1
  }));
}

function drawStars() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.fillStyle = "rgba(255, 255, 255, 0.8)";
  stars.forEach(s => {
    ctx.fillRect(s.x, s.y, s.s, s.s);
    s.y += s.v;
    if (s.y > canvas.height) s.y = 0;
  });
  requestAnimationFrame(drawStars);
}

/* --- INITIALIZATION --- */
window.onload = () => {
  initStars();
  drawStars();
  updateMedals();
  startBoot();
  // Handle initial hash
  if(window.location.hash) {
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.querySelector(window.location.hash).classList.add('active');
  }
};
window.onresize = initStars;

</script>
</body>
</html>
